## JPA 양방향 연관관계 편의 메서드

    연관관계 편의 메서드란, 객체지향과 데이터베이스간 연관관계 설정의 차이를 해소하는 방법이다.

    데이터베이스 테이블에서는 양방향이라는 개념이 없다.
    단순히 JOIN 만이 있을 뿐이다.
    어느 한쪽에 FK가 있고, 어느 쪽에서든 JOIN으로 데이터를 가져오기만 하면 되는 것이다.

    이와 같은 매커니즘으로 JPA에서도 연관관계의 주인인 객체에서만 FK를 잘 관리해주면 문제가 없다.

    하지만 JPA는 ORM이고, 객체지향적으로 양방향인데 한 쪽에서만 연관관계를 관리하는 것은 옳지 못하다.
    또한 한쪽에서만 연관관계를 설정해주었다 했을때, 영속화가 되기 전에 해당 트랜잭션에서 관계를 사용해버린다면
    아직 적용되지 않은 관계로 인해서 문제가 생길 수 있다.

    이에 양방향 연관관계 편의 메서드가 등장했다.

    참고로 연관관계 편의 메서드는 주로 참조 혹은 Control 하는 쪽에 놓는 것이 좋다.
    
---

    위의 글을 잘 읽어보았다면 알겠지만 연관관계 편의 메서드는 필수가 아니다.
    양방향이라도, 연관관계의 주인인 쪽에서만 FK를 잘 관리해준다면 문제가 없다.
    그러나 ORM을 사용하는만큼 조금이라도 객체지향적인 관계를 구성하기 위해 사용할 뿐이다.

---

#### Setter를 이용한 예시

    게시글에서 댓글을 일대다 양방향으로 갖는 관계를 예시로 들어보겠다.
    아래 소스코드는 Post 게시글의 메서드이다.
    
```java
    public void addComment(Comment comment) {
        comments.add(comment);
        comment.setPost(this);
    }
```