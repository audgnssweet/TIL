## JPA ToMany 관계의 조회쿼리 최적화

    ## JPA ToMany 관계 조회쿼리 최적화 

    DB 성능문제의 거의 99%는 조회 쿼리에서 발생한다. CUD는 거의 단순한 경우가 많고, 한번에 수십개의
    CUD를 할 일이 잘 없기 때문이다. (있다면 보통 벌크쿼리로 처리할듯)

    MyBatis나 Spring JDBC Template를 사용하면 Query를 Native하게 가져갈 수 있고
    DBA가 다룬다면 정말 원하는 성능을 제대로 뽑아낼 수 있을지 모른다.
    
    하지만 JPA를 사용하면 생산성이 레벨이 다르다.
    또한 JPA에 대한 깊은 이해로 잘 사용만 한다면, 정말 답도없이 난해한 통계쿼리가 아니라면 거진 커버가 가능하다.

    실제로 국내 트래픽이 많은 IT 기업들에서 JPA를 사용하는 경우가 많은 것만 봐도 예측이 가능하다.

    조회쿼리를 최적화해보자.
    참고로 QueryDSL이나 Spring data JPA 를 사용하지 않은 Pure JPA이다.

---

    대상은 Article과 Comment로 하겠다.

    우선 결론부터 얘기하면 아래가 전부다.
    OneToMany : batch size

---

    OneToMany 관계에서 쿼리를 줄여보자.

    상황은 이렇다. 게시글(Article)이 있고, 그 글을 작성한 회원(Member)이 있다.
    Article 정보를 가져와서 화면에 뿌려주는데, Member의 이름까지 글쓴이로 보여주어야해서, Member까지 끌어와야 하는 상황이다.
    또한 댓글(Comment) 들이 달려있는데, 이것까지 한꺼번에 가져와야 하는 상황이다.

#### 기본적인 상황 (최적화 전)

